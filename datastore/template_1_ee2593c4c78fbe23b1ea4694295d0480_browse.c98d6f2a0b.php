<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_calendar_front_browse extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '';\n\tfunction birthday( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nforeach ( $rows as $row ):\n$return .= <<<CONTENT\n\n\t<li class='ipsGrid_span6 ipsPhotoPanel ipsPhotoPanel_mini ipsClearfix'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( $row['member_id'] ), 'mini' );\n$return .= <<<CONTENT\n\n\t\t<div>\n\t\t\t<h3 class='ipsType_normal ipsType_reset ipsTruncate ipsTruncate_line'>\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::load( $row['member_id'] )->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t<span class='ipsType_light'>\n\t\t\t\t\nCONTENT;\n\nif ( $row['bday_year'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$pluralize = array( \\IPS\\Member::load( $row['member_id'] )->age( \\IPS\\calendar\\Date::getDate( \\IPS\\Request::i()->y ?: NULL, \\IPS\\Request::i()->m ?: NULL, \\IPS\\Request::i()->d ?: NULL ) ) ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_age', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/span>\n\t\t<\/div>\n\t<\/li>\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction birthdaysTable( $table, $headers, $rows, $quickSearch ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-baseurl='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-resort='\nCONTENT;\n$return .= htmlspecialchars( $table->resortKey, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.global.core.table' \nCONTENT;\n\nif ( $table->getPaginationKey() != 'page' ):\n$return .= <<<CONTENT\ndata-pageParam='\nCONTENT;\n$return .= htmlspecialchars( $table->getPaginationKey(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\n\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\n\t\nCONTENT;\n\nif ( count( $rows ) ):\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsGrid ipsGrid_collapsePhone ipsPad ipsClear \nCONTENT;\n\nforeach ( $table->classes as $class ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n' id='elTable_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role=\"tableRows\">\n\t\t\t\nCONTENT;\n\n$return .= $table->rowsTemplate[0]->{$table->rowsTemplate[1]}( $table, $headers, $rows );\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsType_center ipsPad'>\n\t\t\t<p class='ipsType_large ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_rows_in_table', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\nCONTENT;\n\nif ( method_exists( $table, 'container' ) AND $table->container() !== NULL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $table->container()->can('add') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $table->container()->url()->setQueryString( 'do', 'add' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary ipsButton_medium'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'submit_first_row', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\n\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarDay( $calendars, $date, $featured, $birthdays, $birthdayCount, $events, $tomorrow, $yesterday, $today, $thisCalendar, $jump ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsGrid ipsGrid_collapsePhone ipsPager cCalendarNav ipsSpacer_bottom' data-ipsSticky data-ipsSticky-disableIn='phone'>\n\t<div class='ipsGrid_span3 ipsType_left ipsPager_prev'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$yesterday->year}&m={$yesterday->mon}&d={$yesterday->mday}\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$yesterday->year}&m={$yesterday->mon}&d={$yesterday->mday}\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($yesterday->monthName, $yesterday->mday, $yesterday->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='prev nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n\n$sprintf = array($yesterday->monthName, $yesterday->mday); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day_noyear', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $yesterday->year, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n\t<div class='ipsGrid_span6 ipsType_center ipsPad cCalendarNav' data-role='calendarNav'>\n\t\t<h1 class='ipsType_pageTitle ipsType_center'>\nCONTENT;\n\n$sprintf = array($date->monthName, $date->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h1>\n\t\t<ul class='ipsButton_split ipsType_noBreak'>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calmonth\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&y={$date->year}&m={$date->mon}\", null, \"calendar_month\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'month', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&id={$thisCalendar->_id}&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_calweek\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_week\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->firstDayOfWeek('monthNameShort'), $date->firstDayOfWeek('mday'), $date->firstDayOfWeek('year'), $date->lastDayOfWeek('monthNameShort'),\t$date->lastDayOfWeek('mday'), $date->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='#' class='ipsButton ipsButton_primary ipsButton_verySmall' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calstream\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&y={$date->year}&m={$date->mon}\", null, \"calendar_stream\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'><span class='ipsResponsive_hidePhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><span class='ipsResponsive_showPhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream_short', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t<\/ul>\n\t<\/div>\n\t<div class='ipsGrid_span3 ipsType_right ipsPager_next'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$tomorrow->year}&m={$tomorrow->mon}&d={$tomorrow->mday}\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$tomorrow->year}&m={$tomorrow->mon}&d={$tomorrow->mday}\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($tomorrow->monthName, $tomorrow->mday, $tomorrow->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='next nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n\n$sprintf = array($tomorrow->monthName, $tomorrow->mday); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day_noyear', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $tomorrow->year, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n<\/div>\n\n\nCONTENT;\n\nif ( count( $birthdays ) ):\n$return .= <<<CONTENT\n\n<div class='ipsColumns ipsColumns_collapseTablet'>\n\t<div class='ipsColumn ipsColumn_fluid'>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<div class='ipsBox'>\n\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'events_happening_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nif ( $events['count'] > 0 ):\n$return .= <<<CONTENT\n\n\t\t<ol class='cCalendarDay ipsDataList'>\n\t\t\t\nCONTENT;\n\nif ( isset( $events['allDay'] ) && count( $events['allDay'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsDataItem cCalendarDay_allDay'>\n\t\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size5 cCalendarDay_hour cCalendarDay_allDay ipsAreaBackground ipsPad'>\n\t\t\t\t\t\t<h2 class='ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day_view_all_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsDataItem_main ipsPad'>\n\t\t\t\t\t\t<div class='cCalendarDay_eventList' data-ipsPatchwork data-ipsPatchwork-minColSize='300' data-ipsPatchwork-maxColSize='500'>\n\t\t\t\t\t\t\t<div data-role='patchworkList'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $events['allDay'] as $event ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div data-role='patchworkItem'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"view\", \"calendar\" )->eventBlock( $event, $date, true );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\nCONTENT;\n\nforeach ( $events as $hour => $hourEvents ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( count( $hourEvents ) && $hour !== 'allDay' && $hour !== 'count' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size5 cCalendarDay_hour ipsAreaBackground ipsPad'>\n\t\t\t\t\t\t\t<h2 class='ipsType_reset'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\calendar\\Date::usesAmPm() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\calendar\\Date::getTwelveHour( $hour ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<br><span>\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\calendar\\Date::getAmPm( $hour ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $hour, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<br><span>:00<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/h2>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsDataItem_main ipsAreaBackground_light ipsPad'>\n\t\t\t\t\t\t\t<div class='cCalendarDay_eventList' data-ipsPatchwork data-ipsPatchwork-minColSize='300' data-ipsPatchwork-maxColSize='500'>\n\t\t\t\t\t\t\t\t<div data-role='patchworkList'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $hourEvents as $idx => $event ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<div data-role='patchworkItem'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"view\", \"calendar\" )->eventBlock( $event, $date, true );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad ipsAreaBackground ipsSpacer_bottom'><span class='ipsType_light ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_events_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\n\n\nCONTENT;\n\nif ( count( $birthdays )  ):\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class='ipsColumn ipsColumn_medium'>\n\t\t\nCONTENT;\n\nforeach ( $birthdays AS $bdayDate => $birthday ):\n$return .= <<<CONTENT\n\n\t\t\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$pluralize = array( $birthdayCount[ $bdayDate ] ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'birthdays_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $birthday AS $member ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem ipsClearfix'>\n\t\t\t\t\t\t<div class='ipsDataItem_main ipsPhotoPanel ipsPhotoPanel_tiny ipsClearfix'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $member, 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{$member->link()}\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->bday_year ):\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$pluralize = array( $member->age( $date ) ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_age', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( count($birthday) < $birthdayCount[ $bdayDate ] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem ipsClearfix ipsAreaBackground_light ipsPad ipsPad_half ipsType_center'>\n\t\t\t\t\t\t<a data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$pluralize = array( $birthdayCount[ $bdayDate ] ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'birthdays_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n' data-ipsDialog-size=\"narrow\" href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$date->mday}&show=birthdays\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&y={$date->year}&m={$date->mon}&d={$date->mday}&show=birthdays\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'birthdays_view_all', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarFeatured( $featured, $date ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( count($featured)  ):\n$return .= <<<CONTENT\n\n\t<hr class='ipsHr'>\n\t<div class='ipsBox'>\n\t\t<h2 class='ipsType_reset ipsType_sectionTitle'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured_events', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t<div class='ipsPad'>\n\t\t\t<div class='ipsCarousel ipsClearfix' data-ipsCarousel>\n\t\t\t\t<ul class='cCalendarCarousel ipsClearfix' data-role=\"carouselItems\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $featured as $event ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsCarousel_item'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"view\", \"calendar\" )->eventBlock( $event, $date, true, false );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\t<span class='ipsCarousel_shadow ipsCarousel_shadowLeft'><\/span>\n\t\t\t\t<span class='ipsCarousel_shadow ipsCarousel_shadowRight'><\/span>\n\t\t\t\t<a href='#' class='ipsCarousel_nav ipsHide' data-action='prev'><i class='fa fa-chevron-left'><\/i><\/a>\n\t\t\t\t<a href='#' class='ipsCarousel_nav ipsHide' data-action='next'><i class='fa fa-chevron-right'><\/i><\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarHeader( $calendars, $thisCalendar, $jump, $downloadLinks ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $thisCalendar and $club = $thisCalendar->club() ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->clubs and \\IPS\\Settings::i()->clubs_header == 'full' ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->header( $club, $thisCalendar );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n<div class=\"ipsPageHeader ipsPad_half ipsClearfix ipsSpacer_bottom\" id='elCalendarsHeader'>\n\t\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPos_right ipsResponsive_noFloat'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->follow( 'calendar', 'calendar', $thisCalendar->id, \\IPS\\calendar\\Event::containerFollowerCount( $thisCalendar ) );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<span class=\"ipsType_pageTitle\">\n\t\t\nCONTENT;\n\nif ( $thisCalendar and $club = $thisCalendar->club() ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $thisCalendar->_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<a href='#elCalendars_menu' id='elCalendars' data-ipsMenu data-ipsMenu-appendTo=\"#elCalendarsHeader\" class='ipsType_blendLinks'>\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $thisCalendar->_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_calendars', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n &nbsp;<i class='fa fa-caret-down'><\/i><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t&nbsp;&nbsp;<a href='#elCalendarSettings_menu' id='elCalendarSettings' data-ipsMenu data-ipsMenu-alignCenter data-ipsMenu-appendTo=\"#elCalendarsHeader\" class='ipsType_blendLinks'><i class='fa fa-cog'><\/i><\/a>\n\t\t\nCONTENT;\n\nif ( ( $thisCalendar AND $thisCalendar->can('add') ) OR ( !$thisCalendar AND \\IPS\\calendar\\Calendar::canOnAny('add') ) ):\n$return .= <<<CONTENT\n\n\t\t\t&nbsp;&nbsp;\n\t\t\t\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit&do=submit&id={$thisCalendar->id}\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_important ipsButton_small ipsResponsive_hidePhone ipsResponsive_inlineBlock'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_event', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsdialog data-ipsdialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_container', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsdialog-size='narrow' class='ipsButton ipsButton_important ipsButton_small ipsResponsive_hidePhone ipsResponsive_inlineBlock'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_event', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<a href='#elCalendarJump' data-ipsMenu data-ipsMenu-menuID='elCalendarJump' data-ipsMenu-closeOnClick='false' class='ipsButton ipsButton_light ipsButton_small ipsResponsive_showDesktop ipsResponsive_inlineBlock'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'jump_to', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\t\t\n\t<\/span>\n<\/div>\n\n{$jump->customTemplate( array( \\IPS\\Theme::i()->getTemplate( 'browse' ), 'dateJump' ) )}\n\n<ul class='ipsMenu ipsMenu_auto ipsHide' id='elCalendars_menu'>\n\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view\", null, \"calendar\", array(), 0 ) );\n$return .= <<<CONTENT\n'><span class='cCalendarIcon cEvents_style_blank'><\/span> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_calendars', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\nCONTENT;\n\nforeach ( $calendars as $calendar ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n$return .= htmlspecialchars( $calendar->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><span class='cCalendarIcon cEvents_style\nCONTENT;\n$return .= htmlspecialchars( $calendar->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/span> \nCONTENT;\n$return .= htmlspecialchars( $calendar->_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\n<ul class='ipsMenu ipsMenu_auto ipsHide' id='elCalendarSettings_menu'>\n\t<li class='ipsMenu_title'>\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($thisCalendar->_title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'with_calendar', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'with_all_calendars', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/li>\n\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $downloadLinks['iCalCalendar'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $downloadLinks['iCalAll'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><i class='fa fa-download'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'download_webcal', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\n$return .= htmlspecialchars( str_replace( array( 'http:\/\/', 'https:\/\/' ), 'webcal:\/\/', $thisCalendar ? $downloadLinks['iCalCalendar'] : $downloadLinks['iCalAll'] ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-calendar'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'subscribe_webcal', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n<\/ul>\n\n<hr class='ipsHr'>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarMonth( $calendars, $date, $featured, $birthdays, $events, $today, $thisCalendar, $jump, $startDates=array() ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsGrid ipsGrid_collapsePhone ipsPager cCalendarNav ipsSpacer_bottom' data-ipsSticky data-ipsSticky-disableIn='phone'>\n\t<div class='ipsGrid_span3 ipsType_left ipsPager_prev'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&id={$thisCalendar->_id}&y={$date->lastMonth('year')}&m={$date->lastMonth('mon')}\", null, \"calendar_calmonth\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$date->lastMonth('year')}&m={$date->lastMonth('mon')}\", null, \"calendar_month\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($date->lastMonth('monthName'), $date->lastMonth('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='prev nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n$return .= htmlspecialchars( $date->lastMonth('monthName'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $date->lastMonth('year'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n\t<div class='ipsGrid_span6 ipsType_center ipsPad' data-role='calendarNav'>\n\t\t<h1 class='ipsType_pageTitle ipsType_center'>\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h1>\n\t\t<ul class='ipsButton_split ipsType_noBreak'>\n\t\t\t<li><a href='#' class='ipsButton ipsButton_primary ipsButton_verySmall' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'month', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&id={$thisCalendar->_id}&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_calweek\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_week\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->firstDayOfWeek('monthNameShort'), $date->firstDayOfWeek('mday'), $date->firstDayOfWeek('year'), $date->lastDayOfWeek('monthNameShort'),\t$date->lastDayOfWeek('mday'), $date->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$date->mday}\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&y={$date->year}&m={$date->mon}&d={$date->mday}\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calstream\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&y={$date->year}&m={$date->mon}\", null, \"calendar_stream\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'><span class='ipsResponsive_hidePhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><span class='ipsResponsive_showPhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream_short', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t<\/ul>\n\t<\/div>\n\t<div class='ipsGrid_span3 ipsType_right ipsPager_next'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&id={$thisCalendar->_id}&y={$date->nextMonth('year')}&m={$date->nextMonth('mon')}\", null, \"calendar_calmonth\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$date->nextMonth('year')}&m={$date->nextMonth('mon')}\", null, \"calendar_month\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($date->nextMonth('monthName'), $date->nextMonth('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='next nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n$return .= htmlspecialchars( $date->nextMonth('monthName'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $date->nextMonth('year'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n<\/div>\n\n<table class='cCalendar ipsBox' data-controller='calendar.front.browse.monthView'>\n\t<tr>\n\t\t\nCONTENT;\n\nforeach ( \\IPS\\calendar\\Date::getDayNames() as $day  ):\n$return .= <<<CONTENT\n\n\t\t\t<th class='ipsPad_half ipsAreaBackground_dark' data-short='\nCONTENT;\n$return .= htmlspecialchars( $day['abbreviated'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-veryShort='\nCONTENT;\n$return .= htmlspecialchars( $day['letter'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><span>\nCONTENT;\n$return .= htmlspecialchars( $day['full'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/th>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/tr>\n\t<tr>\n\t\t\nCONTENT;\n\nfor ( $i=0; $i < $date->firstDayOfMonth('wday'); $i++  ):\n$return .= <<<CONTENT\n\n\t\t\t<td class='cCalendar_nonDate'>&nbsp;<\/td>\n\t\t\nCONTENT;\n\nendfor;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nfor ( $j=$i+$date->lastDayOfMonth('mday'), $k=1; $i < $j; $i++, $k++  ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$k = str_pad( $k, 2, '0', STR_PAD_LEFT );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $i%7 == 0 ):\n$return .= <<<CONTENT\n\n\t\t\t\t<\/tr>\n\t\t\t\t<tr>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<td class='cCalendar_date\nCONTENT;\n\nif ( $k == 1 ):\n$return .= <<<CONTENT\n cCalendar_firstDay\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $today->mysqlDatetime( FALSE ) == $date->year . '-' . $date->mon . '-' . $k  ):\n$return .= <<<CONTENT\n cCalendar_today\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( isset( $events[ $date->year . '-' . $date->mon . '-' . $k ] ) ):\n$return .= <<<CONTENT\n cCalendar_hasEvents\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<div>\n\t\t\t\t\t<a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$k}&view=day\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$date->year}&m={$date->mon}&d={$k}&view=day\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' class='ipsType_blendLinks cCalendar_dayNumber'>\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\nCONTENT;\n\nif ( ( $thisCalendar AND $thisCalendar->can('add') ) OR ( !$thisCalendar AND \\IPS\\calendar\\Calendar::canOnAny('add') ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit&do=submit&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$k}&view=day\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit&y={$date->year}&m={$date->mon}&d={$k}&view=day\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_event', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_verySmall ipsButton_primary cCalendar_miniAddEvent'><i class='ipsType_small fa fa-plus'><\/i><\/a>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $date->year . '-' . $date->mon . '-' . $k ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<ul class='cEvents_wrapper'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $date->year . '-' . $date->mon . '-' . $k ]['ranged'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='cEvents_ranged'>\n\t\t\t\t\t\t\t\t\t<ul class='cEvents'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $events[ $date->year . '-' . $date->mon . '-' . $k ]['ranged'] as $event  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='cEvents_event cEvents_style\nCONTENT;\n$return .= htmlspecialchars( $event->calendar_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ), 'startDate' ) AND $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ), 'startDate' )->mysqlDatetime( FALSE ) == $date->year . '-' . $date->mon . '-' . $k  ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$startDates[ $event->id ] = $date->year . '-' . $date->mon . '-' . $k;\n$return .= <<<CONTENT\n cEvents_first\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ) ?: $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ), 'startDate' ), 'endDate' ) AND $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ) ?: $event->nextOccurrence( \\IPS\\calendar\\Date::getDate( $date->year, $date->mon, $k ), 'startDate' ), 'endDate' )->mysqlDatetime( FALSE ) == $date->year . '-' . $date->mon . '-' . $k  ):\n$return .= <<<CONTENT\n cEvents_last\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-eventID='\nCONTENT;\n$return .= htmlspecialchars( $event->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $event->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsHover data-ipsHover-target='\nCONTENT;\n$return .= htmlspecialchars( $event->url('hovercard')->setQuerystring( 'sd', isset( $startDates[ $event->id ] ) ? $startDates[ $event->id ] : $date->year . '-' . $date->mon . '-' . $k ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n$return .= htmlspecialchars( $event->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( !$event->all_day ):\n$return .= <<<CONTENT\n<span class='cEvents_time'>\nCONTENT;\n$return .= htmlspecialchars( $event->_start_date->localeTime( FALSE ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( mb_substr( html_entity_decode( $event->title ), '0', \"15\" ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) . ( ( mb_strlen( html_entity_decode( $event->title ) ) > \"15\" ) ? '&hellip;' : '' );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->hidden() === 1 ):\n$return .= <<<CONTENT\n <i class='fa fa-warning'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $date->year . '-' . $date->mon . '-' . $k ]['single'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='cEvents_single'>\n\t\t\t\t\t\t\t\t\t<ul class='cEvents'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $events[ $date->year . '-' . $date->mon . '-' . $k ]['single'] as $event  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='cEvents_event cEvents_style\nCONTENT;\n$return .= htmlspecialchars( $event->calendar_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-eventID='\nCONTENT;\n$return .= htmlspecialchars( $event->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $event->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsHover data-ipsHover-target='\nCONTENT;\n$return .= htmlspecialchars( $event->url('hovercard')->setQuerystring( 'sd', $date->year . '-' . $date->mon . '-' . $k ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n$return .= htmlspecialchars( $event->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( !$event->all_day ):\n$return .= <<<CONTENT\n<span class='cEvents_time'>\nCONTENT;\n$return .= htmlspecialchars( $event->_start_date->localeTime( FALSE ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( mb_substr( html_entity_decode( $event->title ), '0', \"15\" ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) . ( ( mb_strlen( html_entity_decode( $event->title ) ) > \"15\" ) ? '&hellip;' : '' );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->hidden() === 1 ):\n$return .= <<<CONTENT\n <i class='fa fa-warning'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $birthdays[ $date->mon . $k ] ) AND $birthdays[ $date->mon . $k ]  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<p class='cCalendar_birthdays ipsType_light'><a class='ipsType_blendLinks' href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$k}\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$date->year}&m={$date->mon}&d={$k}\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$pluralize = array( $birthdays[ $date->mon . $k ] ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'birthdays_count', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/a><\/p>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/td>\n\t\t\nCONTENT;\n\nendfor;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nfor ( ; $i%7 != 0; $i++ ):\n$return .= <<<CONTENT\n\n\t\t\t<td class='cCalendar_nonDate'>&nbsp;<\/td>\n\t\t\nCONTENT;\n\nendfor;\n$return .= <<<CONTENT\n\n\t<\/tr>\n<\/table>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarStream( $calendars, $date, $featured, $events, $thisCalendar, $jump, $pagination ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsGrid ipsGrid_collapsePhone ipsPager cCalendarNav ipsSpacer_bottom' data-ipsSticky data-ipsSticky-disableIn='phone'>\n\t<div class='ipsGrid_span3 ipsType_left ipsPager_prev'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&id={$thisCalendar->_id}&y={$date->lastMonth('year')}&m={$date->lastMonth('mon')}\", null, \"calendar_calstream\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&y={$date->lastMonth('year')}&m={$date->lastMonth('mon')}\", null, \"calendar_stream\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($date->lastMonth('monthName'), $date->lastMonth('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='prev nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n$return .= htmlspecialchars( $date->lastMonth('monthName'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $date->lastMonth('year'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n\t<div class='ipsGrid_span6 ipsType_center ipsPad' data-role='calendarNav'>\n\t\t<h1 class='ipsType_pageTitle ipsType_center'>\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h1>\n\t\t<ul class='ipsButton_split ipsType_noBreak'>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calmonth\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&y={$date->year}&m={$date->mon}\", null, \"calendar_month\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'month', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&id={$thisCalendar->_id}&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_calweek\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&w={$date->year}-{$date->mon}-{$date->mday}\", null, \"calendar_week\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->firstDayOfWeek('monthNameShort'), $date->firstDayOfWeek('mday'), $date->firstDayOfWeek('year'), $date->lastDayOfWeek('monthNameShort'),\t$date->lastDayOfWeek('mday'), $date->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$date->mday}\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&y={$date->year}&m={$date->mon}&d={$date->mday}\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='#' class='ipsButton ipsButton_primary ipsButton_verySmall' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' data-action='changeView'><span class='ipsResponsive_hidePhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><span class='ipsResponsive_showPhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream_short', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t<\/ul>\n\t<\/div>\n\t<div class='ipsGrid_span3 ipsType_right ipsPager_next'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&id={$thisCalendar->_id}&y={$date->nextMonth('year')}&m={$date->nextMonth('mon')}\", null, \"calendar_calstream\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&y={$date->nextMonth('year')}&m={$date->nextMonth('mon')}\", null, \"calendar_stream\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($date->nextMonth('monthName'), $date->nextMonth('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='next nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n$return .= htmlspecialchars( $date->nextMonth('monthName'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $date->nextMonth('year'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/a>\n\t<\/div>\n<\/div>\n\n\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=calendar&module=calendar&controller=view&view=stream&id=' . $thisCalendar->_id . '&y=' . $date->year . '&m=' . $date->mon, NULL, 'calendar_calstream', $thisCalendar->title_seo ), $pagination['pages'], $pagination['page'], $pagination['limit'] );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=calendar&module=calendar&controller=view&view=stream&y=' . $date->year . '&m=' . $date->mon, NULL, 'calendar_stream' ), $pagination['pages'], $pagination['page'], $pagination['limit'] );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<br>\n<section class='ipsBox ipsBox_transparent ipsAreaBackground_light ipsPad' id='calendarStream'>\n\t\nCONTENT;\n\nif ( count($events)  ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsList_reset'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $events as $event ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"view\", \"calendar\" )->eventStreamBlock( $event, $date, TRUE, array( 240, 185 ), TRUE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsType_light ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_events_month', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/section>\n<br>\n\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=calendar&module=calendar&controller=view&view=stream&id=' . $thisCalendar->_id . '&y=' . $date->year . '&m=' . $date->mon, NULL, 'calendar_calstream', $thisCalendar->title_seo ), $pagination['pages'], $pagination['page'], $pagination['limit'] );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=calendar&module=calendar&controller=view&view=stream&y=' . $date->year . '&m=' . $date->mon, NULL, 'calendar_stream' ), $pagination['pages'], $pagination['page'], $pagination['limit'] );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarWeek( $calendars, $date, $featured, $birthdays, $events, $nextWeek, $lastWeek, $days, $today, $thisCalendar, $jump, $startDates=array() ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsGrid ipsGrid_collapsePhone ipsPager cCalendarNav ipsSpacer_bottom' data-ipsSticky data-ipsSticky-disableIn='phone'>\n\t<div class='ipsGrid_span3 ipsType_left ipsPager_prev'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&id={$thisCalendar->_id}&w={$lastWeek->year}-{$lastWeek->mon}-{$lastWeek->mday}\", null, \"calendar_calweek\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&w={$lastWeek->year}-{$lastWeek->mon}-{$lastWeek->mday}\", null, \"calendar_week\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($lastWeek->firstDayOfWeek('monthNameShort'), $lastWeek->firstDayOfWeek('mday'), $lastWeek->firstDayOfWeek('year'), $lastWeek->lastDayOfWeek('monthNameShort'), $lastWeek->lastDayOfWeek('mday'), $lastWeek->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='prev nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'previous_week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\n\t\t\t\t<span class='ipsResponsive_inline ipsResponsive_hidePhone'>\n\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($lastWeek->firstDayOfWeek('monthNameShort'), $lastWeek->firstDayOfWeek('mday'), $lastWeek->firstDayOfWeek('year'), $lastWeek->lastDayOfWeek('monthNameShort'), $lastWeek->lastDayOfWeek('mday'), $lastWeek->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t\t<span class='ipsResponsive_inline ipsResponsive_showPhone'>\n\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($lastWeek->firstDayOfWeek('monthNameShort'), $lastWeek->firstDayOfWeek('mday'), $lastWeek->firstDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title_wb', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/span>\n\t\t<\/a>\n\t<\/div>\n\t<div class='ipsGrid_span6 ipsType_center ipsPad' data-role='calendarNav'>\n\t\t<h1 class='ipsType_pageTitle ipsType_center'>\nCONTENT;\n\n$sprintf = array($date->firstDayOfWeek('monthNameShort'), $date->firstDayOfWeek('mday'), $date->firstDayOfWeek('year'), $date->lastDayOfWeek('monthNameShort'), $date->lastDayOfWeek('mday'), $date->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h1>\n\t\t<ul class='ipsButton_split ipsType_noBreak'>\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calmonth\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=month&y={$date->year}&m={$date->mon}\", null, \"calendar_month\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'month', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='#' class='ipsButton ipsButton_primary ipsButton_verySmall' title='\nCONTENT;\n\n$sprintf = array($date->firstDayOfWeek('monthNameShort'), $date->firstDayOfWeek('mday'), $date->firstDayOfWeek('year'), $date->lastDayOfWeek('monthNameShort'), $date->lastDayOfWeek('mday'), $date->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nif ( in_array( $today, $days ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d={$today->mday}&view=day\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&y={$date->year}&m={$date->mon}&d={$today->mday}&view=day\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $today->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}&d=1&view=day\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=day&y={$date->year}&m={$date->mon}&d=1&view=day\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->mday, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li><a href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&id={$thisCalendar->_id}&y={$date->year}&m={$date->mon}\", null, \"calendar_calstream\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=stream&y={$date->year}&m={$date->mon}\", null, \"calendar_stream\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$sprintf = array($date->monthName, $date->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='changeView'><span class='ipsResponsive_hidePhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><span class='ipsResponsive_showPhone ipsResponsive_inline'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'event_stream_short', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t<\/ul>\n\t<\/div>\n\t<div class='ipsGrid_span3 ipsType_right ipsPager_next'>\n\t\t<a href=\"\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&id={$thisCalendar->_id}&w={$nextWeek->year}-{$nextWeek->mon}-{$nextWeek->mday}\", null, \"calendar_calweek\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&view=week&w={$nextWeek->year}-{$nextWeek->mon}-{$nextWeek->mday}\", null, \"calendar_week\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$sprintf = array($nextWeek->firstDayOfWeek('monthNameShort'), $nextWeek->firstDayOfWeek('mday'), $nextWeek->firstDayOfWeek('year'), $nextWeek->lastDayOfWeek('monthNameShort'), $nextWeek->lastDayOfWeek('mday'), $nextWeek->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' rel='next nofollow' data-action='changeView'>\n\t\t\t<span class='ipsPager_type ipsType_normal'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'next_week', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<span class='ipsPager_title ipsType_light'>\n\t\t\t\t<span class='ipsResponsive_inline ipsResponsive_hidePhone'>\n\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($nextWeek->firstDayOfWeek('monthNameShort'), $nextWeek->firstDayOfWeek('mday'), $nextWeek->firstDayOfWeek('year'), $nextWeek->lastDayOfWeek('monthNameShort'), $nextWeek->lastDayOfWeek('mday'), $nextWeek->lastDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t\t<span class='ipsResponsive_inline ipsResponsive_showPhone'>\n\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($nextWeek->firstDayOfWeek('monthNameShort'), $nextWeek->firstDayOfWeek('mday'), $nextWeek->firstDayOfWeek('year')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_week_title_wb', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/span>\n\t\t<\/a>\n\t<\/div>\n<\/div>\n\n<div>\n\t<ul class='ipsList_reset cCalendarWeek'>\n\t\t\nCONTENT;\n\nforeach ( $days as $day ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsColumns ipsColumns_collapsePhone ipsBox'>\n\t\t\t<div class='ipsColumn ipsColumn_wide cCalendarWeek_day \nCONTENT;\n\nif ( $today->year == $day->year AND $today->mon == $day->mon AND $today->mday == $day->mday ):\n$return .= <<<CONTENT\n cCalendar_today\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t<h2 class='ipsType_sectionHead'><strong><a class='ipsType_blendLinks' href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$day->year}&m={$day->mon}&d={$day->mday}&view=day\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$day->year}&m={$day->mon}&d={$day->mday}&view=day\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $day->dayName, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/strong><\/h2>\n\t\t\t\t\t<p class='ipsType_reset ipsType_light ipsType_uppercase'>\nCONTENT;\n\n$sprintf = array($day->monthName, $day->mday, $day->year); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cal_month_day', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid ipsAreaBackground_reset'>\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $day->year . '-' . $day->mon . '-' . $day->mday ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<ul class='cEvents_wrapper'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $day->year . '-' . $day->mon . '-' . $day->mday ]['ranged'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='cEvents_ranged'>\n\t\t\t\t\t\t\t\t\t<ul class='cEvents'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $events[ $day->year . '-' . $day->mon . '-' . $day->mday ]['ranged'] as $event  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='cEvents_event cEvents_style\nCONTENT;\n$return .= htmlspecialchars( $event->calendar_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->nextOccurrence( $day, 'startDate' ) AND $event->nextOccurrence( $day, 'startDate' )->mysqlDatetime( FALSE ) == $day->mysqlDatetime( FALSE )  ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$startDates[ $event->id ] = $day->mysqlDatetime( FALSE );\n$return .= <<<CONTENT\n cEvents_first\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->nextOccurrence( $day ?: $event->nextOccurrence( $day, 'startDate' ), 'endDate' ) AND $event->nextOccurrence( $day ?: $event->nextOccurrence( $day, 'startDate' ), 'endDate' )->mysqlDatetime( FALSE ) == $day->mysqlDatetime( FALSE )  ):\n$return .= <<<CONTENT\n cEvents_last\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $event->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsHover data-ipsHover-target='\nCONTENT;\n$return .= htmlspecialchars( $event->url('hovercard')->setQuerystring( 'sd', isset( $startDates[ $event->id ] ) ? $startDates[ $event->id ] : $day->mysqlDatetime( FALSE ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $event->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->hidden() === 1 ):\n$return .= <<<CONTENT\n <i class='fa fa-warning'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $events[ $day->year . '-' . $day->mon . '-' . $day->mday ]['single'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='cEvents_single'>\n\t\t\t\t\t\t\t\t\t<ul class='cEvents'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $events[ $day->year . '-' . $day->mon . '-' . $day->mday ]['single'] as $event  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='cEvents_event cEvents_style\nCONTENT;\n$return .= htmlspecialchars( $event->calendar_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $event->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsHover data-ipsHover-target='\nCONTENT;\n$return .= htmlspecialchars( $event->url('hovercard')->setQuerystring( 'sd', $day->year . '-' . $day->mon . '-' . $day->mday ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $event->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $event->hidden() === 1 ):\n$return .= <<<CONTENT\n <i class='fa fa-warning'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<span class='ipsType_light ipsType_medium'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_events_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $birthdays[ $day->mon . $day->mday ] ) AND $birthdays[ $day->mon . $day->mday ]  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<p class='cCalendar_birthdays ipsType_light'><a class='ipsType_blendLinks' href='\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&id={$thisCalendar->_id}&y={$day->year}&m={$day->mon}&d={$day->mday}&view=day\", null, \"calendar_calday\", array( $thisCalendar->title_seo ), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=view&y={$day->year}&m={$day->mon}&d={$day->mday}&view=day\", null, \"calendar_day\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$pluralize = array( $birthdays[ $day->mon . $day->mday ] ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'birthdays_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/a><\/p>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction calendarWrapper( $calendar, $calendars, $thisCalendar, $jump, $date, $featured, $downloadLinks ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"browse\", \"calendar\" )->calendarHeader( $calendars, $thisCalendar, $jump, $downloadLinks );\n$return .= <<<CONTENT\n\n\n<div data-controller='calendar.front.browse.main' class='ipsSpacer_top'>\n{$calendar}\n<\/div>\n\n<ul class=\"ipsToolList ipsToolList_horizontal ipsResponsive_showPhone ipsResponsive_block ipsClearfix ipsSpacer_top\">\n\t\nCONTENT;\n\nif ( ( $thisCalendar AND $thisCalendar->can('add') ) OR ( !$thisCalendar AND \\IPS\\calendar\\Calendar::canOnAny('add') ) ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $thisCalendar ):\n$return .= <<<CONTENT\n\n\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit&calendar={$thisCalendar->id}\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_important ipsButton_normal ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_event', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<li><a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=calendar&module=calendar&controller=submit\", null, \"calendar_submit\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_important ipsButton_normal ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_event', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<li><a href='#elCalendarJump' data-ipsMenu data-ipsMenu-menuID='elCalendarJump' data-ipsMenu-closeOnClick='false' class='ipsButton ipsButton_light ipsButton_fullWidth ipsButton_normal'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'jump_to', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a><\/li>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/ul>\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"browse\", \"calendar\" )->calendarFeatured( $featured, $date );\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction dateJump( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div id='elCalendarJump' class='ipsMenu ipsMenu_medium ipsHide'>\n\t<form accept-charset='utf-8' class=\"ipsPad ipsForm ipsForm_vertical\" method='post' action='\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsForm>\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsList_reset'>\n\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $input instanceof \\IPS\\Helpers\\Form\\Date ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsFieldRow ipsFieldRow_fullWidth'>\n\t\t\t\t\t\t\t<input type=\"date\" data-control=\"date\" placeholder=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'jump_to_placeholder', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" name='\nCONTENT;\n$return .= htmlspecialchars( $input->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='\nCONTENT;\n$return .= htmlspecialchars( $input->htmlId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $input->required === TRUE ):\n$return .= <<<CONTENT\nrequired\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n value=\"\nCONTENT;\n\nif ( $input->defaultValue instanceof \\IPS\\DateTime ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $input->defaultValue->format('Y-m-d'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t{$input->rowHtml($form)}\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t<input type=\"submit\" class=\"ipsButton ipsButton_primary ipsButton_fullWidth ipsButton_small\" value=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'calendar_jump', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t<\/li>\n\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t<input type=\"submit\" class=\"ipsButton ipsButton_light ipsButton_fullWidth ipsButton_small\" value=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'calendar_jump_today', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" name=\"goto\">\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/form>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
